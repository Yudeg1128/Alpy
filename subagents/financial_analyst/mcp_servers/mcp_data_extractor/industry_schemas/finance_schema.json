{
  "finance_schema": {
    "schema_type": "finance",
    "description": "Comprehensive schema for financial institutions including banks, insurance companies, and other financial services firms. Captures unique aspects like interest income/expense, loan portfolios, and regulatory capital requirements.",
    "industry_indicators": ["interest income", "net interest margin", "loan loss provisions", "deposits", "loans", "assets under management", "insurance premiums", "trading income", "investment securities", "regulatory capital"],
    "common_business_types": ["commercial banks", "investment banks", "insurance companies", "asset managers", "consumer finance", "mortgage lenders", "private equity", "hedge funds", "brokerages", "fintech"],
    "income_statement": {
      "interest_income": {
        "type": ["number", "null"], "sign": "positive", "level": "component", "subtotal_of": "net_interest_income",
        "projection_logic": {
          "forecast_method": "driver_based", "default_driver_tier": "Tier 1", "default_driver_metric": "yield_on_earning_assets",
          "calculation_template": { "formula": "(([balance_sheet.loans_net_prior] + [balance_sheet.loans_net_current]) / 2) * [driver_value]" }
        }
      },
      "interest_expense": {
        "type": ["number", "null"], "sign": "negative", "level": "component", "subtotal_of": "net_interest_income",
        "projection_logic": {
          "forecast_method": "driver_based", "default_driver_tier": "Tier 1", "default_driver_metric": ["cost_of_borrowings", "cost_of_deposits"],
          "calculation_template": { "formula": "((([balance_sheet.borrowings_prior] + [balance_sheet.borrowings_current]) / 2) * [driver:cost_of_borrowings]) + ((([balance_sheet.deposits_prior] + [balance_sheet.deposits_current]) / 2) * [driver:cost_of_deposits])" }
        }
      },
      "net_interest_income": { "type": ["number", "null"], "sign": "both", "level": "subtotal", "subtotal_of": "total_operating_income", "projection_logic": { "forecast_method": "summation", "default_driver_tier": "Tier 3" } },
      "fee_income": { "type": ["number", "null"], "sign": "positive", "level": "component", "subtotal_of": "total_operating_income", "projection_logic": { "forecast_method": "driver_based", "default_driver_tier": "Tier 1", "default_driver_metric": "fixed_growth_rate", "calculation_template": { "formula": "[income_statement.fee_income_prior] * (1 + [driver_value])" } } },
      "trading_income": { "type": ["number", "null"], "sign": "both", "level": "component", "subtotal_of": "total_operating_income", "projection_logic": { "forecast_method": "driver_based", "default_driver_tier": "Tier 2", "default_driver_metric": "fixed_amount", "calculation_template": { "formula": "[driver_value]" } } },
      "insurance_premiums_earned": { "type": ["number", "null"], "sign": "positive", "level": "component", "subtotal_of": "total_operating_income", "projection_logic": { "forecast_method": "driver_based", "default_driver_tier": "Tier 2", "default_driver_metric": "fixed_growth_rate", "calculation_template": { "formula": "[income_statement.insurance_premiums_earned_prior] * (1 + [driver_value])" } } },
      "other_operating_income": { "type": ["number", "null"], "sign": "positive", "level": "component", "subtotal_of": "total_operating_income", "projection_logic": { "forecast_method": "driver_based", "default_driver_tier": "Tier 2", "default_driver_metric": "passthrough_from_prior_period", "calculation_template": { "formula": "[income_statement.other_operating_income_prior]" } } },
      "total_operating_income": { "type": ["number", "null"], "sign": "positive", "level": "subtotal", "subtotal_of": "operating_profit_before_provisions", "projection_logic": { "forecast_method": "summation", "default_driver_tier": "Tier 3" } },
      "personnel_expenses": { "type": ["number", "null"], "sign": "negative", "level": "component", "subtotal_of": "total_operating_expenses", "projection_logic": { "forecast_method": "driver_based", "default_driver_tier": "Tier 2", "default_driver_metric": "%_of_operating_income", "calculation_template": { "formula": "[income_statement.total_operating_income_current] * [driver_value]" } } },
      "administrative_expenses": { "type": ["number", "null"], "sign": "negative", "level": "component", "subtotal_of": "total_operating_expenses", "projection_logic": { "forecast_method": "driver_based", "default_driver_tier": "Tier 2", "default_driver_metric": "%_of_operating_income", "calculation_template": { "formula": "[income_statement.total_operating_income_current] * [driver_value]" } } },
      "depreciation_amortization": { "type": ["number", "null"], "sign": "negative", "level": "component", "subtotal_of": "total_operating_expenses", "schema_role": "NON_CASH_CHARGE_CFI", "projection_logic": { "forecast_method": "driver_based", "default_driver_tier": "Tier 2", "default_driver_metric": "%_of_fixed_assets_ppe", "calculation_template": { "formula": "(([balance_sheet.fixed_assets_ppe_prior] + [balance_sheet.fixed_assets_ppe_current]) / 2) * [driver_value]" } } },
      "insurance_claims_expenses": { "type": ["number", "null"], "sign": "negative", "level": "component", "subtotal_of": "total_operating_expenses", "projection_logic": { "forecast_method": "driver_based", "default_driver_tier": "Tier 2", "default_driver_metric": "loss_ratio_of_premiums", "calculation_template": { "formula": "[income_statement.insurance_premiums_earned_current] * [driver_value]" } } },
      "other_operating_expenses": { "type": ["number", "null"], "sign": "negative", "level": "component", "subtotal_of": "total_operating_expenses", "projection_logic": { "forecast_method": "driver_based", "default_driver_tier": "Tier 2", "default_driver_metric": "passthrough_from_prior_period", "calculation_template": { "formula": "[income_statement.other_operating_expenses_prior]" } } },
      "total_operating_expenses": { "type": ["number", "null"], "sign": "negative", "level": "subtotal", "subtotal_of": "operating_profit_before_provisions", "projection_logic": { "forecast_method": "summation", "default_driver_tier": "Tier 3" } },
      "operating_profit_before_provisions": { "type": ["number", "null"], "sign": "both", "level": "subtotal", "subtotal_of": "operating_profit", "projection_logic": { "forecast_method": "summation", "default_driver_tier": "Tier 3" } },
      "loan_loss_provisions": { "type": ["number", "null"], "sign": "negative", "level": "component", "subtotal_of": "operating_profit", "schema_role": "NON_CASH_CHARGE_CFO", "projection_logic": { "forecast_method": "driver_based", "default_driver_tier": "Tier 1", "default_driver_metric": "credit_loss_rate_of_loans", "calculation_template": { "formula": "(([balance_sheet.loans_net_prior] + [balance_sheet.loans_net_current]) / 2) * [driver_value]" } } },
      "operating_profit": { "type": ["number", "null"], "sign": "both", "level": "subtotal", "subtotal_of": "profit_before_tax", "projection_logic": { "forecast_method": "summation", "default_driver_tier": "Tier 3" } },
      "non_operating_income_expense": { "type": ["number", "null"], "sign": "both", "level": "component", "subtotal_of": "profit_before_tax", "projection_logic": { "forecast_method": "driver_based", "default_driver_tier": "Tier 2", "default_driver_metric": "fixed_amount", "calculation_template": { "formula": "[driver_value]" } } },
      "profit_before_tax": { "type": ["number", "null"], "sign": "both", "level": "subtotal", "subtotal_of": "net_profit", "projection_logic": { "forecast_method": "summation", "default_driver_tier": "Tier 3" } },
      "income_tax_expense": { "type": ["number", "null"], "sign": "negative", "level": "component", "subtotal_of": "net_profit", "projection_logic": { "forecast_method": "driver_based", "default_driver_tier": "Tier 2", "default_driver_metric": "effective_tax_rate_of_pbt", "calculation_template": { "formula": "[income_statement.profit_before_tax_current] * [driver_value]" } } },
      "net_profit": { "type": ["number", "null"], "sign": "both", "level": "total", "schema_role": "PROFIT_AND_LOSS_ANCHOR", "projection_logic": { "forecast_method": "summation", "default_driver_tier": "Tier 3" } }
    },
    "balance_sheet": {
      "cash_due_from_banks": { "type": ["number", "null"], "sign": "positive", "level": "component", "subtotal_of": "total_liquid_assets", "cfs_classification": "CASH_EQUIVALENT", "projection_logic": { "forecast_method": "passthrough", "default_driver_tier": "Tier 3", "calculation_template": { "formula": "[cash_flow_statement.ending_cash_balance_current]" } } },
      "securities_held_for_trading": { "type": ["number", "null"], "sign": "positive", "level": "component", "subtotal_of": "total_liquid_assets", "cfs_classification": "CFO_OPERATING_ASSET", "projection_logic": { "forecast_method": "driver_based", "default_driver_tier": "Tier 2", "default_driver_metric": "%_of_net_loans", "calculation_template": { "formula": "[balance_sheet.loans_net_current] * [driver_value]" } } },
      "total_liquid_assets": { "type": ["number", "null"], "sign": "positive", "level": "subtotal", "subtotal_of": "total_assets", "projection_logic": { "forecast_method": "summation", "default_driver_tier": "Tier 3" } },
      "investment_securities": { "type": ["number", "null"], "sign": "positive", "level": "component", "subtotal_of": "total_liquid_assets", "cfs_classification": "CFO_OPERATING_ASSET", "projection_logic": { "forecast_method": "driver_based", "default_driver_tier": "Tier 2", "default_driver_metric": "%_of_net_loans", "calculation_template": { "formula": "[balance_sheet.loans_net_current] * [driver_value]" } } },
      "loans_gross": { "type": ["number", "null"], "sign": "positive", "level": "component", "subtotal_of": "loans_net", "cfs_classification": "CFO_OPERATING_ASSET", "projection_logic": { "forecast_method": "driver_based", "default_driver_tier": "Tier 1", "default_driver_metric": "loan_growth_rate", "calculation_template": { "formula": "[balance_sheet.loans_gross_prior] * (1 + [driver_value])" } } },
      "allowance_for_loan_losses": { "type": ["number", "null"], "sign": "negative", "level": "component", "subtotal_of": "loans_net", "cfs_classification": "CFO_OPERATING_ASSET", "projection_logic": { "forecast_method": "roll_forward", "default_driver_tier": "Tier 3", "calculation_template": { "formula": "[balance_sheet.allowance_for_loan_losses_prior] + [income_statement.loan_loss_provisions_current]" } } },
      "loans_net": { "type": ["number", "null"], "sign": "positive", "level": "subtotal", "subtotal_of": "total_assets", "projection_logic": { "forecast_method": "summation", "default_driver_tier": "Tier 3" } },
      "fixed_assets_ppe": { "type": ["number", "null"], "sign": "positive", "level": "component", "subtotal_of": "total_assets", "cfs_classification": "CFI_INVESTING_ASSET", "projection_logic": { "forecast_method": "roll_forward", "default_driver_tier": "Tier 3", "calculation_template": { "formula": "[balance_sheet.fixed_assets_ppe_prior] + [cash_flow_statement.cf_capex_current] + [income_statement.depreciation_amortization_current]" } } },
      "other_assets": { "type": ["number", "null"], "sign": "positive", "level": "component", "subtotal_of": "total_assets", "cfs_classification": "CFO_OPERATING_ASSET", "projection_logic": { "forecast_method": "driver_based", "default_driver_tier": "Tier 2", "default_driver_metric": "%_of_net_loans", "calculation_template": { "formula": "[balance_sheet.loans_net_current] * [driver_value]" } } },
      "total_assets": { "type": ["number", "null"], "sign": "positive", "level": "total", "projection_logic": { "forecast_method": "summation", "default_driver_tier": "Tier 3" } },
      "deposits": { "type": ["number", "null"], "sign": "negative", "level": "component", "subtotal_of": "total_liabilities", "cfs_classification": "CFF_FINANCING_LIABILITY", "projection_logic": { "forecast_method": "driver_based", "default_driver_tier": "Tier 1", "default_driver_metric": "driven_by_loan_to_deposit_ratio", "calculation_template": { "formula": "[balance_sheet.loans_net_current] / [driver_value]" } } },
      "borrowings": { "type": ["number", "null"], "sign": "negative", "level": "component", "subtotal_of": "total_liabilities", "cfs_classification": "CFF_FINANCING_LIABILITY", "projection_logic": { "forecast_method": "driver_based", "default_driver_tier": "Tier 2", "default_driver_metric": "debt_schedule", "calculation_template": { "formula": "[driver_value]" } } },
      "revolver_debt": { "type": ["number", "null"], "sign": "negative", "level": "component", "subtotal_of": "total_liabilities", "schema_role": "FUNDING_PLUG_DEBT", "cfs_classification": "CFF_FINANCING_LIABILITY", "projection_logic": { "forecast_method": "balancing_item", "default_driver_tier": "Tier 3" } },
      "other_liabilities": { "type": ["number", "null"], "sign": "negative", "level": "component", "subtotal_of": "total_liabilities", "cfs_classification": "CFO_OPERATING_LIABILITY", "projection_logic": { "forecast_method": "driver_based", "default_driver_tier": "Tier 2", "default_driver_metric": "%_of_net_loans", "calculation_template": { "formula": "[balance_sheet.loans_net_current] * [driver_value]" } } },
      "total_liabilities": { "type": ["number", "null"], "sign": "negative", "level": "total", "projection_logic": { "forecast_method": "summation", "default_driver_tier": "Tier 3" } },
      "share_capital": { "type": ["number", "null"], "sign": "positive", "level": "component", "subtotal_of": "total_equity", "cfs_classification": "CFF_EQUITY", "projection_logic": { "forecast_method": "driver_based", "default_driver_tier": "Tier 2", "default_driver_metric": "passthrough_from_prior_period", "calculation_template": { "formula": "[balance_sheet.share_capital_prior]" } } },
      "retained_earnings": { "type": ["number", "null"], "sign": "both", "level": "component", "subtotal_of": "total_equity", "schema_role": "EQUITY_ROLLFORWARD_ANCHOR", "cfs_classification": "CFF_EQUITY", "projection_logic": { "forecast_method": "roll_forward", "default_driver_tier": "Tier 3", "calculation_template": { "formula": "[balance_sheet.retained_earnings_prior] + [income_statement.net_profit_current] - Abs([cash_flow_statement.cf_dividends_paid_current])" } } },
      "other_equity_components": { "type": ["number", "null"], "sign": "both", "level": "component", "subtotal_of": "total_equity", "cfs_classification": "CFF_EQUITY", "projection_logic": { "forecast_method": "driver_based", "default_driver_tier": "Tier 2", "default_driver_metric": "passthrough_from_prior_period", "calculation_template": { "formula": "[balance_sheet.other_equity_components_prior]" } } },
      "total_equity": { "type": ["number", "null"], "sign": "positive", "level": "total", "projection_logic": { "forecast_method": "summation", "default_driver_tier": "Tier 3" } }
    },
    "cash_flow_statement": {
      "cf_net_profit": { "type": ["number", "null"], "sign": "both", "level": "component", "subtotal_of": "net_cash_operating", "derivation_type": "direct_from_is", "derivation_source": "IS_PROFIT_ANCHOR", "projection_logic": { "forecast_method": "passthrough", "default_driver_tier": "Tier 3", "calculation_template": { "formula": "[income_statement.net_profit_current]" } } },
      "cf_depreciation_amortization": { "type": ["number", "null"], "sign": "positive", "level": "component", "subtotal_of": "net_cash_operating", "derivation_type": "non_cash_add_back_is_expense", "derivation_source": "NON_CASH_CHARGE_CFI", "projection_logic": { "forecast_method": "passthrough", "default_driver_tier": "Tier 3", "calculation_template": { "formula": "[income_statement.depreciation_amortization_current] * -1" } } },
      "cf_change_trading_assets_liabilities": { "type": ["number", "null"], "sign": "both", "level": "component", "subtotal_of": "net_cash_operating", "derivation_type": "delta_net_components", "derivation_source": ["balance_sheet.securities_held_for_trading", "balance_sheet.investment_securities"], "projection_logic": { "forecast_method": "bs_delta", "default_driver_tier": "Tier 3", "calculation_template": { "formula": "(([balance_sheet.securities_held_for_trading_prior] - [balance_sheet.securities_held_for_trading_current]) + ([balance_sheet.investment_securities_prior] - [balance_sheet.investment_securities_current]))" } } },
      "cf_net_change_in_loans": { "type": ["number", "null"], "sign": "both", "level": "component", "subtotal_of": "net_cash_operating", "derivation_type": "delta_asset", "derivation_source": "balance_sheet.loans_gross", "projection_logic": { "forecast_method": "bs_delta", "default_driver_tier": "Tier 3", "calculation_template": { "formula": "([balance_sheet.loans_net_prior] - [balance_sheet.loans_net_current])" } } },
      "cf_change_in_other_assets": { "type": ["number", "null"], "sign": "both", "level": "component", "subtotal_of": "net_cash_operating", "derivation_type": "delta_asset", "derivation_source": "balance_sheet.other_assets", "projection_logic": { "forecast_method": "bs_delta", "default_driver_tier": "Tier 3", "calculation_template": { "formula": "([balance_sheet.other_assets_prior] - [balance_sheet.other_assets_current])" } } },
      "cf_change_in_other_liabilities": { "type": ["number", "null"], "sign": "both", "level": "component", "subtotal_of": "net_cash_operating", "derivation_type": "delta_liability", "derivation_source": "balance_sheet.other_liabilities", "projection_logic": { "forecast_method": "bs_delta", "default_driver_tier": "Tier 3", "calculation_template": { "formula": "([balance_sheet.other_liabilities_current] - [balance_sheet.other_liabilities_prior])" } } },
      "net_cash_operating": { "type": ["number", "null"], "sign": "both", "level": "subtotal", "subtotal_of": "net_change_in_cash", "projection_logic": { "forecast_method": "summation", "default_driver_tier": "Tier 3" } },
      "cf_capex": { "type": ["number", "null"], "sign": "negative", "level": "component", "subtotal_of": "net_cash_investing", "derivation_type": "derived_capex", "derivation_source": "BALANCE_SHEET_CFI_ASSET_CHANGES", "projection_logic": { "forecast_method": "driver_based", "default_driver_tier": "Tier 2", "default_driver_metric": "%_of_revenue_or_fixed", "calculation_template": { "formula": "[income_statement.total_operating_income_current] * [driver_value]" } } },
      "net_cash_investing": { "type": ["number", "null"], "sign": "both", "level": "subtotal", "subtotal_of": "net_change_in_cash", "projection_logic": { "forecast_method": "summation", "default_driver_tier": "Tier 3" } },
      "cf_net_change_in_deposits": { "type": ["number", "null"], "sign": "both", "level": "component", "subtotal_of": "net_cash_financing", "derivation_type": "delta_liability", "derivation_source": "balance_sheet.deposits", "projection_logic": { "forecast_method": "bs_delta", "default_driver_tier": "Tier 3", "calculation_template": { "formula": "([balance_sheet.deposits_current] - [balance_sheet.deposits_prior])" } } },
      "cf_net_change_in_borrowings": { "type": ["number", "null"], "sign": "both", "level": "component", "subtotal_of": "net_cash_financing", "derivation_type": "delta_liability", "derivation_source": "balance_sheet.borrowings", "projection_logic": { "forecast_method": "bs_delta", "default_driver_tier": "Tier 3", "calculation_template": { "formula": "([balance_sheet.borrowings_current] - [balance_sheet.borrowings_prior])" } } },
      "cf_equity_issuance": { "type": ["number", "null"], "sign": "positive", "level": "component", "subtotal_of": "net_cash_financing", "derivation_type": "delta_equity_non_re", "derivation_source": "balance_sheet.share_capital", "projection_logic": { "forecast_method": "bs_delta", "default_driver_tier": "Tier 3", "calculation_template": { "formula": "([balance_sheet.share_capital_current] - [balance_sheet.share_capital_prior])" } } },
      "cf_dividends_paid": { "type": ["number", "null"], "sign": "negative", "level": "component", "subtotal_of": "net_cash_financing", "derivation_type": "derived_dividend_plug", "derivation_source": "DERIVED_DIVIDEND_PLUG", "projection_logic": { "forecast_method": "driver_based", "default_driver_tier": "Tier 1", "default_driver_metric": "payout_ratio_of_net_profit", "calculation_template": { "formula": "[income_statement.net_profit_current] * [driver_value]" } } },
      "cf_share_repurchases": { "type": ["number", "null"], "sign": "negative", "level": "component", "subtotal_of": "net_cash_financing", "derivation_type": "direct_value_or_zero", "derivation_source": "EXTERNAL_DATA", "projection_logic": { "forecast_method": "driver_based", "default_driver_tier": "Tier 2", "default_driver_metric": "fixed_amount", "calculation_template": { "formula": "[driver_value]" } } },
      "cf_change_in_other_equity": { "type": ["number", "null"], "sign": "both", "level": "component", "subtotal_of": "net_cash_financing", "derivation_type": "delta_equity_non_re", "derivation_source": "balance_sheet.other_equity_components", "projection_logic": { "forecast_method": "bs_delta", "default_driver_tier": "Tier 3", "calculation_template": { "formula": "([balance_sheet.other_equity_components_current] - [balance_sheet.other_equity_components_prior])" } } },
      "cf_net_change_in_revolver": { "type": ["number", "null"], "sign": "both", "level": "component", "subtotal_of": "net_cash_financing", "schema_role": "FUNDING_PLUG_CASH_FLOW", "derivation_type": "delta_liability", "derivation_source": "balance_sheet.revolver_debt", "projection_logic": { "forecast_method": "bs_delta", "default_driver_tier": "Tier 3", "calculation_template": { "formula": "([balance_sheet.revolver_debt_current] - [balance_sheet.revolver_debt_prior])" } } },
      "net_cash_financing": { "type": ["number", "null"], "sign": "both", "level": "subtotal", "subtotal_of": "net_change_in_cash", "projection_logic": { "forecast_method": "summation", "default_driver_tier": "Tier 3" } },
      "net_change_in_cash": { "type": ["number", "null"], "sign": "both", "level": "total", "projection_logic": { "forecast_method": "summation", "default_driver_tier": "Tier 3" } },
      "beginning_cash_balance": { "type": ["number", "null"], "sign": "positive", "level": "rollforward_item", "subtotal_of": "ending_cash_balance", "projection_logic": { "forecast_method": "passthrough", "default_driver_tier": "Tier 3", "calculation_template": { "formula": "[cash_flow_statement.ending_cash_balance_prior]" } } },
      "ending_cash_balance": { "type": ["number", "null"], "sign": "positive", "level": "rollforward_item", "projection_logic": { "forecast_method": "summation", "default_driver_tier": "Tier 3" } }
    }
  }
}